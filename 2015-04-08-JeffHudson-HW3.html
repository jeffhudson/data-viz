<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Jeff's Magic Graph</title>
    <link rel="stylesheet" type="text/css" href="d3-cookbook/css/styles.css"/>
    <script type="text/javascript" src="d3-cookbook/lib/d3.js"></script>
</head>

<body>

<div class="control-group">
    <button onclick="setup()">
        generate new data!
    </button>
</div>

<script type="text/javascript">
    function randomDataPoint() {
        var x = Math.round(Math.random() * 1000);
        var y = Math.round(Math.random() * 1000);
        var z = Math.round(Math.random() * 100);
        return [x,y,z];
    }

    function generateData(){
        var data = [];
        for(var i = 0; i < 10; i++){
             data.push(randomDataPoint());
        }
        return data;
    }

    var height = 500, 
        width = 500, 
        lmargin = 40,
        bmargin = 30,
        maxRad = 15,
        xaxisWidth = width - 2*lmargin,
        yaxisHeight = height - 2*bmargin,
        svg;
    
    function createSvg(){
        svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);
    }
    
    function setup(){
        if(svg) svg.remove();
        
        createSvg();

        var xscale = d3.scale.linear()
                       .domain([0, 1000])
                       .range([lmargin, (xaxisWidth - 2*maxRad)]);
        
        var xaxis = d3.svg.axis() 
                      .scale(xscale) 
                      .orient('bottom')
                      .ticks(5);
        
        svg.append("g")
           .attr("class", "axis")
           .attr("transform", "translate(0," + (yaxisHeight-bmargin) + " )")
           .call(xaxis);

        var yscale = d3.scale.linear()
                       .domain([0,1000])
                       .range([(yaxisHeight - 2*maxRad),bmargin]);

        var yaxis = d3.svg.axis() 
                      .scale(yscale) 
                      .orient('left')
                      .ticks(5);

        svg.append("g")
           .attr("class", "axis")
           .attr("transform", "translate(" + lmargin + ",0)")
           .call(yaxis);

        var zscale = d3.scale.linear()
                       .domain([0,100])
                       .range([3,maxRad]);

        var data = generateData();

        d3.select("body").select("svg").selectAll("circle")
            .data(data)
            .enter()
            .append("circle").classed("circle", true)
            .attr("cx", function(d) { return xscale(d[0]); })
            .attr("cy", function(d) { return yscale(d[1]); })
            .attr("r", function(d) { return zscale(d[2]); });

    }
  
</script>

</body>

</html>